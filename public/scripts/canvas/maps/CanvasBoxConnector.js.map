{"version":3,"sources":["CanvasBoxConnector.coffee"],"names":[],"mappings":"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","file":"CanvasBoxConnector.js","sourceRoot":"/source/","sourcesContent":["###\n# Canvas Box Connector\n# \n# Canvas Box Connector is the element what create connections between\n# Canvas Box Elements.\n# \n# @author Thiago Henrique Ramos da Mata <thiago.henrique.mata@gmail.com>\n###\nclass CanvasBoxConnector\n\n    ###\n    # Canvas Box owner of this object\n    # @type CanvasBox\n    ###\n    objBox: null,\n\n    ###\n    # Canvas Box Element that this connector is going from\n    # @type CanvasBoxElement\n    ###\n    objElementFrom: null,\n\n    ###\n    # Camvas Box Element that thi connector is going to\n    # @type CanvasBoxElement\n    ###\n    objElementTo: null,\n\n    ###\n    # Position X of the connector inside the Canvas Box\n    # @type integer\n    ###\n    x: 0,\n\n    ###\n    # Position Y of the connector inside the Canvas Box\n    # @type integer\n    ###\n    y: 0,\n\n    ###\n    # Position Z of the connector inside the Canvas Box\n    # @type integer\n    ###\n    z: 0,\n    \n    ###\n    # Velocity into the X position\n    # @type integer\n    ###\n    dx: 3,\n\n    ###\n    # Veolocity into the Y position\n    # @type integer\n    ###\n    dy: 3,\n    \n    ###\n    # Behavior of the Canvas Box Connector Element\n    # \n    # @type CanvasBoxDefaultConnectorBehavior\n    ###\n    objBehavior: null,\n\n    ###\n    # Canvas 2D Context from the Canvas Box Container\n    # @type CanvasRenderingContext2D\n    ###\n    objContext: null,\n\n    ###\n    # Class name of the Canvas Box Connector\n    # @type string\n    ###\n    strClassName: \"CanvasBoxConnector\",\n    \n    ###\n    # Flag that make easy diff the connectors from the regular elements\n    # without type cast ( slow in javascript )\n    # @type boolean\n    ###\n    isConnector: true,\n\n    ###\n    # Flag that controls if the relative menu is showing up\n    # @type boolean\n    ###\n    booShowMenu: false,\n\n    ###\n    # Relative menu from the connectors\n    # @type CanvasBoxMenu\n    ###\n    objMenu: null,\n    \n    ###\n    # Flag of control if the Element is Fixed ( not moving )\n    ###\n    fixed: false,\n    \n    ###\n    # Flag of control if Element is on DragDrop Event\n    # @type boolean\n    ###\n    dragdrop: false,\n    \n    ###\n    # Create a serializable version of this object\n    # @return Object\n    ###\n    toSerialize:->\n        objResult =\n            x: @x\n            y: @y\n            dx: @dx\n            dy: @dy\n        objResult.objElementFrom = this.objBox.arrElements.indexOf( this.objElementFrom );\n        objResult.objElementTo = this.objBox.arrElements.indexOf( this.objElementTo );\n        objResult.strClassName = this.strClassName;\n        return objResult;\n      \n    ###\n    # Load the Menu of Context of the Connector\n    # @return void\n    ###\n    loadMenu:->\n        this.objMenu = New.CanvasBoxMenu();\n        this.objMenu.objParent = this;\n        this.objMenu.arrMenuItens = {\n            0:{\n                name: \"clone connector\",\n                event:( objParent )->\n                    objParent.copy();\n            }\n        };\n    \n    ###\n    # Initialize the Canvas Box Connector\n    # \n    # @param CanvasBoxElement objElementFrom\n    # @param CanvasBoxElement objElementTo\n    # @return void\n    ###\n    initialize:( objElementFrom , objElementTo )->\n        this.objElementFrom = objElementFrom;\n        this.objElementTo = objElementTo;\n        this.objBehavior = New.CanvasBoxConnectorBehavior( this );\n\n    ###\n    # Refresh the Canvas Box Connector, changing it's position if necessary\n    # @return void\n    ###\n    refresh:->\n        # to be overhide #\n\n    ###\n    # Draw the Canvas Box Connector\n    # @return void\n    ###\n    draw:->\n        # to be overhide #\n\n    ###\n    # Mouse Over check\n    # @return boolean\n    ###\n    isInside:->\n        return false;\n\n    ##\n    # Create the Connector with the default behavior\n    ##\n    constructor:( @objElementFrom , @objElementTo )->\n    \n        if( @objElementFrom == null )\n          throw new CanvasBoxException( \"Canvas Box Line has no Element From on constructor\" );\n\n        if( @objElementTo == null )\n          throw new CanvasBoxException( \"Canvas Box Line has no Element To on constructor\" );\n    \n        @x = ( @objElementFrom.x + @objElementTo.x ) / 2;\n        @y = ( @objElementFrom.y + @objElementTo.y ) / 2;\n        \n        this.objBehavior = New.CanvasBoxConnectorBehavior( this );\n        \n    ###\n    # On Connector Mouse Over Event\n    # \n    # @param Event event\n    # @return boolean\n    ###\n    onMouseOver:( event )->\n        return this.objBehavior.onMouseOver( event );\n\n    ###\n    # On Connector Mouse Out Event\n    # \n    # @param Event event\n    # @return boolean\n    ###\n    onMouseOut:( event )->\n        return this.objBehavior.onMouseOut( event );\n\n    ###\n    # On Connector Mouse Down Event\n    # \n    # @param Event event\n    # @return boolean\n    ###\n    onMouseDown:( event )->\n        return this.objBehavior.onMouseDown( event );\n\n    ###\n    # On Connector Mouse Click Event\n    # @param Event event\n    # @return boolean\n    ###\n    onClick:( event )->\n        return this.objBehavior.onClick( event );\n\n    ###\n    # On Connector Double Mouse Click Event\n    # @param Event event\n    # @return boolean\n    ###\n    onDblClick:( event )->\n        return this.objBehavior.onDblClick( event );\n\n    ###\n    # On Drag Event\n    # @param Event event\n    # @return boolean\n    ###\n    onDrag:( event )->\n        return this.objBehavior.onDrag( event );\n\n    ###\n    # On Drop Event\n    # @param Event event\n    # @return boolean\n    ###\n    onDrop:( event )->\n        return this.objBehavior.onDrop( event );\n\n    ###\n    # On Timer Event\n    # @param Event event\n    # @return boolean\n    ###\n    onTimer:( event )->\n        return this.objBehavior.onTimer( event );\n\n    ###\n    # On Context Menu Event\n    # @param Event event\n    # @return boolean\n    ###\n    onContextMenu:( event )->\n        this.objBox.booShowMenu = not this.objBox.booShowMenu;\n        if( this.objBox.booShowMenu )\n            this.loadMenu();\n            this.objMenu.intMenuX = this.objBox.mouseX;\n            this.objMenu.intMenuY = this.objBox.mouseY;\n            this.objMenu.objContext = this.objContext;\n            this.objMenu.strActualMenuItem = null;\n            this.objBox.objMenuSelected = this.objMenu;\n        return false;\n    \n    ###\n    # Get Force from Connector to some Element\n    #\n    # @param CanvasBoxElement\n    # @return Object\n    ###\n    getForce:( objElement )->\n        return this.objBehavior.getForce( objElement );\n    \n    ###\n    # Clone some connector object\n    ###\n    clone:( objConnector )->\n        return this.cloneLine( objConnector );\n\n    ###\n    # Choose betwen clone from the elements from and to or\n    # link to a another connector\n    ###\n    cloneLine:->\n        this.intCloneCount++;\n        if( this.intCloneCount > 0 && this.intCloneCount % 2 == 0 )\n            objLine = New.CanvasBoxLine( this.objElementFrom , this );\n            this.cloneConnector( objLine , true );\n        else\n            objLine = New.CanvasBoxLine( this , this.objElementTo );\n            this.cloneConnector( objLine );\n        return objLine;\n\n    ###\n    # Clone Connetor\n    # @param CanvasBoxConnector\n    # @return CanvasBoxConnector\n    ###\n    cloneConnector:( objConnector , booReverse )->\n        console.log( \"clone connector\");\n        \n        if( not objConnector )\n            objConnector = New.CanvasBoxConnector( this , this.objElementTo );\n        else\n            objConnector.initialize( this , this.objElementTo );\n\n        objConnector.objBehavior = New[ this.objBehavior.strClassName ]( objConnector );\n        objConnector.x =  this.x;\n        objConnector.y =  this.y;\n        objConnector.side = if this.defaultSide then this.defaultSide else this.side;\n        objConnector.color = if this.defaultColor then this.defaultColor else this.color;\n        objConnector.borderColor = if this.defaultBorderColor then this.defaultBorderColor else this.borderColor;\n        objConnector.borderWidth = if this.defaultBorderWidth then this.defaultBorderWidth else this.borderWidth;\n        this.objBox.addElement( objConnector );\n        if( not booReverse )\n            objConnector.objElementFrom = this;\n            this.objElementTo = objConnector;\n            if( this.objElementFrom )\n                this.objElementFrom.objElementTo = this;\n            if( this.objElementTo )\n                this.objElementTo.objElementFrom = this;\n            if( objConnector.objElementFrom )\n                objConnector.objElementFrom.objElementTo = objConnector;\n            if( objConnector.objElementTo )\n                objConnector.objElementTo.objElementFrom = objConnector;\n        else\n            objConnector.objElementFrom = this.objElementFrom;\n            objConnector.objElementTo = this;\n            this.objElementFrom = objConnector;\n            if( this.objElementTo )\n                this.objElementTo.objElementFrom = this;\n            if( this.objElementFrom )\n                this.objElementFrom.objElementTo = this;\n            if( objConnector.objElementTo )\n                objConnector.objElementTo.objElementFrom = objConnector;\n            if( objConnector.objElementFrom )\n                objConnector.objElementFrom.objElementTo = objConnector;\n        return objConnector;\n\n    ###\n    # Clone Element\n    # @param CanvasBoxConnector\n    # @return CanvasBoxConnector\n    ###\n    clone:( objConnector )->\n        return this.cloneConnector( objConnector );\n\n    ###\n    # Event on Delete Element\n    ###    \n    onDelete:->\n        console.log( \"connector on delete\" );\n        if( this.objElementFrom.isConnector )\n            this.objElementFrom.objElementTo = this.objElementTo;\n        if( this.objElementTo.isConnector )\n            this.objElementTo.objElementFrom = this.objElementFrom;\n    \n    ###\n    # Recursive Action into delete event\n    ###\n    deleteCascade:->\n        this.deleteCascadeFrom();\n        this.deleteCascadeTo();\n        this.objBox.deleteElement( this , false );\n    \n    ###\n    # Recursive Delete into the Element To Direction\n    ###\n    deleteCascadeTo:->\n        console.log( \"delete cascade\" );\n        if( is_object( this.objElementTo ) && this.objElementTo.isConnector )\n            if( this.objElementTo.getId() != -1 )\n                this.objElementTo.deleteCascadeTo();\n            this.objBox.deleteElement( this.objElementTo , false );\n    \n    ###\n    # Recursive Delete into the Element From Direction\n    ###\n    deleteCascadeFrom:->\n        if( is_object( this.objElementFrom ) && this.objElementFrom.isConnector )\n            if( this.objElementFrom.getId() != -1 )\n                this.objElementFrom.deleteCascadeFrom();\n            this.objBox.deleteElement( this.objElementFrom , false );\n  \n    ###\n    # Copy a Connector\n    ###\n    copy:->\n        objConnector = new window[ this.strClassName ]();\n        this.clone( objConnector );\n  \n    ###\n    # Get Id From Connector\n    # @return integer\n    ###  \n    getId:->\n        return this.objBox.arrElements.indexOf( this );\n\n    ##\n    # Load the connector\n    ##\n    load:->\n        # nothing great #\n        "]}