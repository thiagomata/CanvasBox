{"version":3,"sources":["CanvasBoxElement.coffee"],"names":[],"mappings":"AAAA,IAAA,gBAAA;;AAAA;AACI;AAAA;;;KAAA;AAAA,6BAIA,MAAA,GAAQ,IAJR,CAAA;;AAMA;AAAA;;;KANA;;AAAA,6BAUA,CAAA,GAAG,CAVH,CAAA;;AAAA,6BAeA,cAAA,GAAgB,CAfhB,CAAA;;AAiBA;AAAA;;;KAjBA;;AAAA,6BAqBA,CAAA,GAAG,CArBH,CAAA;;AAAA,6BA0BA,cAAA,GAAgB,CA1BhB,CAAA;;AA4BA;AAAA;;;KA5BA;;AAAA,6BAgCA,CAAA,GAAG,CAhCH,CAAA;;AAkCA;AAAA;;;KAlCA;;AAAA,6BAsCA,EAAA,GAAI,CAtCJ,CAAA;;AAwCA;AAAA;;;KAxCA;;AAAA,6BA4CA,EAAA,GAAI,CA5CJ,CAAA;;AA8CA;AAAA;;;;KA9CA;;AAAA,6BAmDA,WAAA,GAAa,IAnDb,CAAA;;AAqDA;AAAA;;;KArDA;;AAAA,6BAyDA,UAAA,GAAY,IAzDZ,CAAA;;AA2DA;AAAA;;;KA3DA;;AAAA,6BA+DA,YAAA,GAAc,kBA/Dd,CAAA;;AAiEA;AAAA;;;;KAjEA;;AAAA,6BAsEA,WAAA,GAAa,KAtEb,CAAA;;AAwEA;AAAA;;;KAxEA;;AAAA,6BA4EA,WAAA,GAAa,KA5Eb,CAAA;;AA8EA;AAAA;;;KA9EA;;AAAA,6BAkFA,OAAA,GAAS,IAlFT,CAAA;;AAoFA;AAAA;;;KApFA;;AAAA,6BAwFA,KAAA,GAAO,KAxFP,CAAA;;AA0FA;AAAA;;;KA1FA;;AAAA,6BA8FA,OAAA,GAAS,KA9FT,CAAA;;AAgGA;AAAA;;;KAhGA;;AAAA,6BAoGA,OAAA,GAAS,IApGT,CAAA;;AAsGA;AAAA;;;KAtGA;;AAAA,6BA0GA,YAAA,GAAc,KA1Gd,CAAA;;AA4GA;AAAA;;;;KA5GA;;AAAA,6BAiHA,UAAA,GAAY,KAAA,CAAA,CAjHZ,CAAA;;AAAA,6BAuHA,OAAA,GAAS,CAvHT,CAAA;;AAAA,6BA6HA,SAAA,GAAW,CA7HX,CAAA;;AA+HA;AAAA;;;KA/HA;;AAAA,6BAmIA,WAAA,GAAY,SAAA,GAAA;AACR,IAAA,SAAA,CAAU;AAAA,MACN,CAAA,EAAG,IAAC,CAAA,CADE;AAAA,MAEN,CAAA,EAAG,IAAC,CAAA,CAFE;AAAA,MAGN,IAAA,EAAM,IAAC,CAAA,OAHD;AAAA,MAIN,YAAA,EAAc,YAJR;KAAV,CAAA,CAAA;AAMA,WAAO,SAAP,CAPQ;EAAA,CAnIZ,CAAA;;AA4IA;AAAA;;;;KA5IA;;AAAA,6BAiJA,IAAA,GAAK,SAAA,GAAA;WACD,IAAC,CAAA,WAAD,GAAe,GAAG,CAAC,MAAM,CAAC,iBAAX,CAA8B,IAA9B,EADd;EAAA,CAjJL,CAAA;;AAoJA;AAAA;;;;KApJA;;AAyJY,EAAA,0BAAA,GAAA;AACR,IAAA,IAAC,CAAA,IAAD,CAAA,CAAA,CADQ;EAAA,CAzJZ;;AA4JA;AAAA;;;KA5JA;;AAAA,6BAgKA,OAAA,GAAQ,SAAA,GAAA;AAEJ,IAAA,IAAC,CAAA,MAAM,CAAC,MAAR,CAAA,CAAA,CAAA;AACA,WAAO,IAAP,CAHI;EAAA,CAhKR,CAAA;;AAqKA;AAAA;;;KArKA;;AAAA,6BAyKA,MAAA,GAAO,SAAA,GAAA;AACH,IAAA,IAAC,CAAA,IAAD,CAAA,CAAA,CAAA;AACA,WAAO,IAAP,CAFG;EAAA,CAzKP,CAAA;;AAAA,6BAkLA,aAAA,GAAc,SAAA,GAAA;AACV,IAAA,IAAC,CAAA,MAAM,CAAC,MAAR,CAAgB,IAAI,CAAC,CAArB,EAAyB,IAAI,CAAC,CAA9B,CAAA,CAAA;AAAA,IACA,IAAC,CAAA,MAAM,CAAC,WAAR,CAAA,CADA,CAAA;AAAA,IAEA,IAAC,CAAA,MAAM,CAAC,SAAR,CAAmB,IAAI,CAAC,CAAxB,EAA4B,IAAI,CAAC,CAAjC,CAFA,CAAA;AAGA,IAAA,IAAkC,IAAC,CAAA,SAAD,GAAa,CAAE,CAAA,GAAI,IAAI,CAAC,EAAX,CAAb,KAAgC,CAAlE;AAAA,MAAA,IAAC,CAAA,MAAM,CAAC,MAAR,CAAgB,IAAC,CAAA,SAAjB,CAAA,CAAA;KAHA;AAIA,WAAO,IAAP,CALU;EAAA,CAlLd,CAAA;;AAAA,6BA4LA,cAAA,GAAe,SAAA,GAAA;AACX,IAAA,IAAC,CAAA,MAAM,CAAC,cAAR,CAAA,CAAA,CAAA;AAAA,IACA,IAAC,CAAA,MAAM,CAAC,SAAR,CAAmB,CAAnB,EAAuB,CAAvB,CADA,CAAA;AAEA,WAAO,IAAP,CAHW;EAAA,CA5Lf,CAAA;;AAiMA;AAAA;;;KAjMA;;AAAA,6BAqMA,IAAA,GAAK,SAAA,GAAA;AACD,UAAM,GAAG,CAAC,MAAM,CAAC,kBAAX,CAAgC,8CAAA,GAA6C,YAA7E,CAAN,CAAA;AAEA,WAAO,IAAP,CAHC;EAAA,CArML,CAAA;;AA0MA;AAAA;;;;;KA1MA;;AAAA,6BAgNA,WAAA,GAAY,SAAE,KAAF,GAAA;AACR,IAAA,IAAC,CAAA,YAAD,GAAgB,IAAhB,CAAA;AACA,WAAO,IAAC,CAAA,WAAW,CAAC,WAAb,CAA0B,KAA1B,CAAP,CAFQ;EAAA,CAhNZ,CAAA;;AAoNA;AAAA;;;;;KApNA;;AAAA,6BA0NA,UAAA,GAAW,SAAE,KAAF,GAAA;AACP,IAAA,IAAC,CAAA,YAAD,GAAgB,KAAhB,CAAA;AACA,WAAO,IAAC,CAAA,WAAW,CAAC,UAAb,CAAyB,KAAzB,CAAP,CAFO;EAAA,CA1NX,CAAA;;AA8NA;AAAA;;;;;KA9NA;;AAAA,6BAoOA,WAAA,GAAY,SAAE,KAAF,GAAA;AACR,WAAO,IAAC,CAAA,WAAW,CAAC,WAAb,CAA0B,KAA1B,CAAP,CADQ;EAAA,CApOZ,CAAA;;AAuOA;AAAA;;;;;KAvOA;;AAAA,6BA6OA,WAAA,GAAY,SAAE,KAAF,GAAA;AACR,WAAO,IAAC,CAAA,WAAW,CAAC,WAAb,CAA0B,KAA1B,CAAP,CADQ;EAAA,CA7OZ,CAAA;;AAAA,6BAsPA,QAAA,GAAS,SAAA,GAAA;AACL,WAAO,IAAC,CAAA,OAAD,KAAY,CAAZ,IACP,CAAI,IAAC,CAAA,MAAM,CAAC,kBAAR,KAA8B,IAA9B,IACA,IAAC,CAAA,MAAM,CAAC,kBAAR,KAA8B,IADlC,CADA,CADK;EAAA,CAtPT,CAAA;;AA2PA;AAAA;;;;KA3PA;;AAAA,6BAgQA,OAAA,GAAQ,SAAE,KAAF,GAAA;AACJ,QAAA,yBAAA;AAAA,IAAA,IAAI,CAAA,IAAK,CAAA,OAAL,IAAgB,IAAC,CAAA,QAAD,CAAA,CAApB;AACI;AAAA,WAAA,2CAAA;6BAAA;AACI,QAAA,IAAG,SAAS,CAAC,YAAb;AACI,iBAAO,SAAS,CAAC,OAAV,CAAmB,KAAnB,CAAP,CADJ;SADJ;AAAA,OADJ;KAAA;AAKA,WAAO,IAAC,CAAA,WAAW,CAAC,OAAb,CAAsB,KAAtB,CAAP,CANI;EAAA,CAhQR,CAAA;;AAwQA;AAAA;;;;KAxQA;;AAAA,6BA6QA,UAAA,GAAW,SAAE,KAAF,GAAA;AACP,WAAO,IAAC,CAAA,WAAW,CAAC,UAAb,CAAyB,KAAzB,CAAP,CADO;EAAA,CA7QX,CAAA;;AAgRA;AAAA;;;;KAhRA;;AAAA,6BAqRA,MAAA,GAAO,SAAE,KAAF,GAAA;AACH,QAAA,yBAAA;AAAA,IAAA,IAAC,CAAA,OAAD,GAAW,IAAX,CAAA;AAEA,IAAA,IAAI,IAAC,CAAA,QAAL;AACI;AAAA,WAAA,2CAAA;6BAAA;AACI,QAAA,IAAI,SAAS,CAAC,YAAd;AACI,iBAAO,SAAS,CAAC,MAAV,CAAkB,KAAlB,CAAP,CADJ;SADJ;AAAA,OADJ;KAFA;AAOA,WAAO,IAAC,CAAA,WAAW,CAAC,MAAb,CAAqB,KAArB,CAAP,CARG;EAAA,CArRP,CAAA;;AA+RA;AAAA;;;;KA/RA;;AAAA,6BAoSA,MAAA,GAAO,SAAE,KAAF,GAAA;AACH,IAAA,IAAC,CAAA,OAAD,GAAW,KAAX,CAAA;AACA,WAAO,IAAC,CAAA,WAAW,CAAC,MAAb,CAAqB,KAArB,CAAP,CAFG;EAAA,CApSP,CAAA;;AAwSA;AAAA;;;;KAxSA;;AAAA,6BA6SA,OAAA,GAAQ,SAAE,KAAF,GAAA;AACJ,WAAO,IAAC,CAAA,WAAW,CAAC,OAAb,CAAsB,KAAtB,CAAP,CADI;EAAA,CA7SR,CAAA;;AAgTA;AAAA;;;;KAhTA;;AAAA,6BAqTA,aAAA,GAAc,SAAE,KAAF,GAAA;AACV,IAAA,IAAC,CAAA,MAAM,CAAC,WAAR,GAAsB,CAAA,IAAE,CAAA,MAAM,CAAC,WAA/B,CAAA;AACA,IAAA,IAAI,IAAC,CAAA,MAAM,CAAC,WAAZ;AACI,MAAA,IAAC,CAAA,OAAO,CAAC,QAAT,GAAoB,IAAC,CAAA,MAAM,CAAC,MAA5B,CAAA;AAAA,MACA,IAAC,CAAA,OAAO,CAAC,QAAT,GAAoB,IAAC,CAAA,MAAM,CAAC,MAD5B,CAAA;AAAA,MAEA,IAAC,CAAA,OAAO,CAAC,MAAT,GAAkB,IAAC,CAAA,MAFnB,CAAA;AAAA,MAGA,IAAC,CAAA,OAAO,CAAC,iBAAT,GAA6B,IAH7B,CAAA;AAAA,MAIA,IAAC,CAAA,MAAM,CAAC,eAAR,GAA0B,IAAC,CAAA,OAJ3B,CADJ;KADA;AAOA,WAAO,KAAP,CARU;EAAA,CArTd,CAAA;;AA+TA;AAAA;;;;;KA/TA;;AAAA,6BAqUA,QAAA,GAAS,SAAE,aAAF,GAAA;AACL,WAAO,IAAC,CAAA,WAAW,CAAC,QAAb,CAAuB,aAAvB,CAAP,CADK;EAAA,CArUT,CAAA;;AAAA,6BA6UA,aAAA,GAAc,SAAA,GAAA;AACV,QAAA,yCAAA;AAAA,IAAA,aAAA,GAAgB,EAAhB,CAAA;AACA;AAAA,SAAA,2CAAA;4BAAA;AACI,MAAA,IAAQ,GAAG,CAAC,SAAJ,CAAe,UAAf,CAAA,IACA,CAAI,UAAU,CAAC,cAAX,KAA6B,IAA7B,IACA,UAAU,CAAC,YAAX,KAA2B,IAD/B,CADA,IAGA,UAAA,KAAc,IAHtB;AAII,QAAA,aAAa,CAAC,IAAd,CAAoB,UAApB,CAAA,CAJJ;OADJ;AAAA,KADA;AAOA,WAAO,aAAP,CARU;EAAA,CA7Ud,CAAA;;AAuVA;AAAA;;;;;KAvVA;;AAAA,6BA6VA,QAAA,GAAS,SAAE,KAAF,GAAA;AACL,QAAA,0BAAA;AAAA;AAAA,SAAA,2CAAA;4BAAA;AACI,MAAA,UAAU,CAAC,aAAX,CAAA,CAAA,CADJ;AAAA,KAAA;AAEA,WAAO,IAAP,CAHK;EAAA,CA7VT,CAAA;;AAkWA;AAAA;;;KAlWA;;AAAA,6BAsWA,KAAA,GAAM,SAAA,GAAA;AACF,WAAO,IAAC,CAAA,MAAM,CAAC,WAAW,CAAC,OAApB,CAA6B,IAA7B,CAAP,CADE;EAAA,CAtWN,CAAA;;AAyWA;AAAA;;;;KAzWA;;AAAA,6BA8WA,IAAA,GAAK,SAAA,GAAA;AACD,QAAA,UAAA;AAAA,IAAA,UAAA,GAAa,GAAK,CAAA,IAAC,CAAA,YAAD,CAAL,CAAA,CAAb,CAAA;AAAA,IACA,UAAU,CAAC,WAAX,GAAyB,GAAK,CAAA,IAAC,CAAA,WAAW,CAAC,YAAb,CAAL,CAAkC,UAAlC,CADzB,CAAA;AAAA,IAEA,UAAU,CAAC,CAAX,GAAe,IAAI,CAAC,MAAL,CAAA,CAAA,GAAiB,IAAC,CAAA,MAAM,CAAC,KAFxC,CAAA;AAAA,IAGA,UAAU,CAAC,CAAX,GAAe,IAAI,CAAC,MAAL,CAAA,CAAA,GAAgB,IAAC,CAAA,MAAM,CAAC,MAHvC,CAAA;AAAA,IAIA,IAAC,CAAA,MAAM,CAAC,UAAR,CAAoB,UAApB,CAJA,CAAA;AAKA,WAAO,UAAP,CANC;EAAA,CA9WL,CAAA;;AAAA,6BA0XA,MAAA,GAAO,SAAA,GAAA;AACH,IAAA,IAAC,CAAA,MAAM,CAAC,kBAAR,GAA6B,IAA7B,CAAA;AAAA,IACA,IAAC,CAAA,IAAD,GAAQ,CADR,CAAA;AAEA,WAAO,IAAP,CAHG;EAAA,CA1XP,CAAA;;AAAA,6BAmYA,IAAA,GAAK,SAAA,GAAA;AACD,IAAA,IAAI,IAAC,CAAA,OAAD,KAAY,IAAhB;AACI,MAAA,IAAC,CAAA,OAAO,CAAC,MAAT,GAAkB,IAAC,CAAA,MAAnB,CADJ;KAAA;AAEA,IAAA,IAAI,IAAC,CAAA,WAAD,KAAgB,IAApB;AACI,MAAA,IAAC,CAAA,WAAW,CAAC,MAAb,GAAsB,IAAC,CAAA,MAAvB,CADJ;KAFA;AAIA,WAAO,IAAP,CALC;EAAA,CAnYL,CAAA;;AAAA,6BA8YA,QAAA,GAAS,SAAG,KAAH,GAAA;AACL,IADO,IAAC,CAAA,QAAA,KACR,CAAA;AAAA,IAAA,IAAC,CAAA,IAAD,CAAA,CAAA,CAAA;AACA,WAAO,IAAP,CAFK;EAAA,CA9YT,CAAA;;AAAA,6BAsZA,IAAA,GAAK,SAAA,GAAA;AACD,IAAA,IAAC,CAAA,QAAD,CAAW,IAAX,CAAA,CAAA;AAAA,IACA,IAAC,CAAA,CAAD,IAAM,EADN,CAAA;AAEA,WAAO,IAAP,CAHC;EAAA,CAtZL,CAAA;;AAAA,6BA+ZA,MAAA,GAAO,SAAA,GAAA;AACH,IAAA,IAAC,CAAA,QAAD,CAAW,IAAX,CAAA,CAAA;AAAA,IACA,IAAC,CAAA,CAAD,IAAM,EADN,CAAA;AAEA,WAAO,IAAP,CAHG;EAAA,CA/ZP,CAAA;;AAAA,6BAwaA,MAAA,GAAO,SAAA,GAAA;AACH,IAAA,IAAC,CAAA,QAAD,CAAW,IAAX,CAAA,CAAA;AAAA,IACA,IAAC,CAAA,CAAD,IAAM,EADN,CAAA;AAEA,WAAO,IAAP,CAHG;EAAA,CAxaP,CAAA;;AAAA,6BAibA,OAAA,GAAQ,SAAA,GAAA;AACJ,IAAA,IAAC,CAAA,QAAD,CAAW,IAAX,CAAA,CAAA;AAAA,IACA,IAAC,CAAA,CAAD,IAAM,EADN,CAAA;AAEA,WAAO,IAAP,CAHI;EAAA,CAjbR,CAAA;;AAAA,6BA6bA,eAAA,GAAgB,SAAE,MAAF,EAAW,MAAX,GAAA;AACZ,UAAU,IAAA,kBAAA,CAAqB,kDAAA,GAAiD,YAAtE,CAAV,CADY;EAAA,CA7bhB,CAAA;;AAAA,6BAucA,QAAA,GAAS,SAAE,MAAF,EAAW,MAAX,GAAA;AACL,QAAA,oCAAA;AAAA,IAAA,SAAA,GAAY,KAAZ,CAAA;AAAA,IACA,IAAC,CAAA,OAAD,CAAA,CADA,CAAA;AAEA,IAAA,IAAI,IAAC,CAAA,eAAD,CAAkB,MAAlB,EAA2B,MAA3B,CAAJ;AACI,MAAA,SAAA,GAAY,IAAZ,CADJ;KAFA;AAKA,IAAA,IAAI,IAAC,CAAA,QAAD,CAAA,CAAJ;AACI;AAAA,WAAA,2CAAA;6BAAA;AACI,QAAA,IAAI,SAAS,CAAC,QAAV,CAAoB,MAApB,EAA6B,MAA7B,CAAJ;AAKI,UAAA,SAAA,GAAY,IAAZ,CALJ;SADJ;AAAA,OADJ;KALA;AAcA,WAAO,SAAP,CAfK;EAAA,CAvcT,CAAA;;AAAA,6BA+dA,SAAA,GAAU,SAAE,SAAF,GAAA;AACN,QAAA,OAAA;AAAA,IAAA,IAAI,IAAC,CAAA,UAAU,CAAC,MAAZ,GAAqB,CAAzB;AACI,MAAA,OAAA,GAAU,IAAC,CAAA,UAAY,CAAA,IAAC,CAAA,UAAU,CAAC,MAAZ,GAAqB,CAArB,CAAvB,CAAA;AAAA,MACA,SAAS,CAAC,iBAAV,GAA8B,OAD9B,CADJ;KAAA;AAAA,IAGA,IAAC,CAAA,UAAU,CAAC,IAAZ,CAAkB,SAAlB,CAHA,CAAA;AAIA,WAAO,IAAP,CALM;EAAA,CA/dV,CAAA;;AAAA,6BAseA,MAAA,GAAO,SAAA,GAAA;WACH,IAAC,CAAA,MAAM,CAAC,aAAR,CAAuB,IAAvB,EADG;EAAA,CAteP,CAAA;;0BAAA;;IADJ,CAAA","file":"CanvasBoxElement.js","sourceRoot":"/source/","sourcesContent":["class CanvasBoxElement\n    ###\n    # Canvas Box owner of this object\n    # @type CanvasBox\n    ###\n    objBox: null\n\n    ###\n    # Position X of the Element inside the Canvas Box\n    # @type integer\n    ###\n    x: 0\n\n    ##\n    # Relative Distance Between X position of cursor\n    ##\n    relativeMousex: 0\n\n    ###\n    # Position Y of the Element inside the Canvas Box\n    # @type integer\n    ###\n    y: 0\n\n    ##\n    # Relative Distance Between X position of cursor\n    ##\n    relativeMousey: 0\n\n    ###\n    # Position Z of the Element inside the Canvas Box\n    # @type integer\n    ###\n    z: 1\n        \n    ###\n    # Velocity into the X position\n    # @type integer\n    ###\n    dx: 0\n\n    ###\n    # Velocity into the Y position\n    # @type integer\n    ###\n    dy: 0\n    \n    ###\n    # Behavior of the Canvas Box Element\n    # \n    # @type CanvasBoxDefaultElementBehavior\n    ###\n    objBehavior: null;\n\n    ###\n    # Canvas 2D Context from the Canvas Box Container\n    # @type CanvasRenderingContext2D\n    ###\n    objContext: null\n\n    ###\n    # Class name of the Canvas Box Element\n    # @type string\n    ###\n    strClassName: \"CanvasBoxElement\"\n    \n    ###\n    #  Flag that make easy diff the connectors from the regular elements\n    #  without type cast ( slow in javascript )\n    #  @type boolean\n    ###\n    isConnector: false\n\n    ###\n    # Flag that controls if the relative menu is showing up\n    # @type boolean\n    ###\n    booShowMenu: false\n\n    ###\n    # Relative menu from the Elements\n    # @type CanvasBoxMenu\n    ###\n    objMenu: null\n\n    ###\n    # Flag of control if the Element is Fixed ( not moving )\n    # @type boolean\n    ###\n    fixed: false\n\n    ###\n    # Flag of control if Element is on DragDrop Event\n    # @type boolean\n    ###\n    booDrag: false\n\n    ###\n    # Context Element Menu\n    # @type CanvasBoxMenu\n    ###\n    objMenu: null,\n\n    ###\n    # Flag of mouse over status\n    # @type boolean\n    ###\n    booMouseOver: false,\n\n    ###\n    # Visual Buttons to interact with the element without\n    # the menu use.\n    # @type CanvasBoxButton[]\n    ###\n    arrButtons: Array(),\n\n    ##\n    # Element Mass can be used by some canvas box behaviors\n    # @type integer\n    ##\n    intMass: 1\n\n    ##\n    # Rotate the element\n    # @type double\n    ##\n    dblRotate: 0\n\n    ###\n    # Create a serializable version of this object\n    # @return Object\n    ###\n    toSerialize:->\n        objResult {\n            x: @x\n            y: @y\n            mass: @intMass\n            strClassName: strClassName\n        };\n        return objResult;\n\n    ###\n    # Init of the Canvas Box Element\n    # \n    # Apply the default objects and values\n    ###\n    init:->\n        @objBehavior = New.canvas.CanvasBoxBehavior( this );\n    \n    ###\n    # Initialize the Canvas Box Element\n    #\n    # For default, just call the init\n    ###\n    constructor:->\n        @init();\n\n    ###\n    # Refresh the Canvas Box Element, changing it's position attributes if necessary\n    # @return CanvasBoxElement me\n    ###\n    refresh:->\n        # to be overhide #\n        @objBox.change()\n        return this;\n\n    ###\n    # On Draw event \n    # @return CanvasBoxElement me\n    ###\n    onDraw:->\n        @draw();\n        return this;\n\n    ##\n    # Change the context of the pencil of canvas to the element\n    #\n    # Pretty cool to make simple to draw rotated elements\n    ##\n    changeContext:->\n        @objBox.moveTo( this.x , this.y );\n        @objBox.saveContext();\n        @objBox.translate( this.x , this.y );\n        @objBox.rotate( @dblRotate ) if ( @dblRotate % ( 2 * Math.PI ) != 0 );\n        return this;\n        \n    ##\n    # Restore the context of the parent box\n    ##\n    restoreContext:->\n        @objBox.restoreContext();\n        @objBox.translate( 0 , 0 );\n        return this;\n\n    ###\n    # Draw the Canvas Box Element\n    # @return CanvasBoxElement me\n    ###\n    draw:->\n        throw New.canvas.CanvasBoxException( \"Draw Method was not properly defined in the #{strClassName}\" );\n        # to be overhide #\n        return this;\n\n    ###\n    # On Element Mouse Over Event\n    # \n    # @param Event event\n    # @return boolean\n    ###\n    onMouseOver:( event )->\n        @booMouseOver = true;\n        return @objBehavior.onMouseOver( event );\n\n    ###\n    # On Element Mouse Out Event\n    # \n    # @param Event event\n    # @return boolean\n    ###\n    onMouseOut:( event )->\n        @booMouseOver = false;\n        return @objBehavior.onMouseOut( event );\n\n    ###\n    # On Element Mouse Down Event\n    # \n    # @param Event event\n    # @return boolean\n    ###\n    onMouseDown:( event )->\n        return @objBehavior.onMouseDown( event );\n\n    ###\n    # On Element Mouse Over Event\n    # \n    # @param Event event\n    # @return boolean\n    ###\n    onMouseOver:( event )->\n        return @objBehavior.onMouseOver( event );\n\n    ##\n    # Return if the element is active\n    #\n    # Return true if this element is the selected one or if there is no\n    # element selected\n    ##\n    isActive:()->\n        return @intMass != 0 && \n        (   @objBox.objElementSelected == null or \n            @objBox.objElementSelected == this )\n        \n    ###\n    # On Element Mouse Click Event\n    # @param Event event\n    # @return boolean\n    ###\n    onClick:( event )->\n        if  not @booDrag && @isActive()\n            for objButton in @arrButtons\n                if objButton.booMouseOver\n                    return objButton.onClick( event );\n\n        return @objBehavior.onClick( event );\n\n    ###\n    # On Element Double Mouse Click Event\n    # @param Event event\n    # @return boolean\n    ###\n    onDblClick:( event )->\n        return @objBehavior.onDblClick( event );\n\n    ###\n    # On Drag Event\n    # @param Event event\n    # @return boolean\n    ###\n    onDrag:( event )->\n        @booDrag = true;\n\n        if  @isActive\n            for objButton in @arrButtons\n                if( objButton.booMouseOver )\n                    return objButton.onDrag( event );\n\n        return @objBehavior.onDrag( event );\n\n    ###\n    # On Drop Event\n    # @param Event event\n    # @return boolean\n    ###\n    onDrop:( event )->\n        @booDrag = false;\n        return @objBehavior.onDrop( event );\n    \n    ###\n    # On Timer Event\n    # @param Event event\n    # @return boolean\n    ###\n    onTimer:( event )->\n        return @objBehavior.onTimer( event );\n\n    ###\n    # On Context Menu Event\n    # @param Event event\n    # @return boolean\n    ###\n    onContextMenu:( event )->\n        @objBox.booShowMenu = !@objBox.booShowMenu;\n        if( @objBox.booShowMenu )\n            @objMenu.intMenuX = @objBox.mouseX;\n            @objMenu.intMenuY = @objBox.mouseY;\n            @objMenu.objBox = @objBox;\n            @objMenu.strActualMenuItem = null;\n            @objBox.objMenuSelected = @objMenu;\n        return false;\n    \n    ###\n    # Get Force from Element\n    #\n    # @param CanvasBoxElement\n    # @return Object\n    ###\n    getForce:( objBoxElement )->\n        return @objBehavior.getForce( objBoxElement );\n\n    ##\n    # Get the connectors what point to this element\n    #\n    # @return CanvasBoxConnector[]\n    ##\n    getConnectors:->\n        arrConnection = [];\n        for objElement in @objBox.arrElements\n            if      php.is_object( objElement ) and\n                    (   objElement.objElementFrom == this or \n                        objElement.objElementTo == this ) and\n                    objElement != this\n                arrConnection.push( objElement );\n        return arrConnection;\n\n    ###\n    # Event on Delete Element\n    #\n    # @param event\n    # @return CanvasBoxElement me\n    ###    \n    onDelete:( event )->\n        for objElement in @getConnectors()\n            objElement.deleteCascade();\n        return this;\n    \n    ###\n    # Get Id From Element\n    # @return integer\n    ###  \n    getId:->\n        return @objBox.arrElements.indexOf( this );\n    \n    ###\n    # Copy a Element\n    #\n    # @return CanvasBoxElement the new element\n    ###\n    copy:->\n        objElement = New[ @strClassName ]();\n        objElement.objBehavior = New[ @objBehavior.strClassName ]( objElement );\n        objElement.x = Math.random() *  @objBox.width ;\n        objElement.y = Math.random() * @objBox.height ;\n        @objBox.addElement( objElement );\n        return objElement\n\n    ##\n    # On Select Element Event\n    # @return CanvasBoxElement me\n    ##\n    select:->\n        @objBox.objElementSelected = this;\n        @mass = 0;\n        return this;\n\n    ##\n    # On Load Element Event\n    # @return CanvasBoxElement me\n    ##\n    load:->\n        if( @objMenu != null )\n            @objMenu.objBox = @objBox;\n        if( @objBehavior != null )\n            @objBehavior.objBox = @objBox;\n        return this;\n\n    ##\n    # Set Fixed Element Event\n    # @return CanvasBoxElement me\n    ##\n    setFixed:( @fixed )->\n        @draw();\n        return this;\n\n    ##\n    # Go Up Element Event\n    # @return CanvasBoxElement me\n    ## \n    goUp:->\n        @setFixed( true );\n        @y -= 10;\n        return this;\n\n    ##\n    # Go Down Element Event\n    # @return CanvasBoxElement me\n    ## \n    goDown:->\n        @setFixed( true );\n        @y += 10;\n        return this;\n\n    ##\n    # Go Left Element Event\n    # @return CanvasBoxElement me\n    ## \n    goLeft:->\n        @setFixed( true );\n        @x -= 10;\n        return this;\n\n    ##\n    # Go Right Element Event\n    # @return CanvasBoxElement me\n    ## \n    goRight:->\n        @setFixed( true );\n        @x += 10;\n        return this\n\n    ##\n    # Returns if the Mouse is Over the Element\n    #\n    # @param mouseX integer horizontal position of cursor pointer\n    # @param mouseY integer vertical position of the cursor pointer\n    # @return boolean\n    ## \n    isInsideElement:( mouseX , mouseY )->\n        throw new CanvasBoxException( \"isInsideElement was not properly defined in the #{strClassName}\" );\n\n    ##\n    # Returns if the Mouse is Over the Element, or some of it's buttons\n    #\n    # @param mouseX integer horizontal position of cursor pointer\n    # @param mouseY integer vertical position of the cursor pointer\n    # @return boolean\n    ## \n    isInside:( mouseX , mouseY )->\n        booResult = false;\n        @refresh();\n        if  @isInsideElement( mouseX , mouseY )\n            booResult = true;\n\n        if  @isActive()\n            for objButton in @arrButtons\n                if( objButton.isInside( mouseX , mouseY ) )\n                    # all the buttons should be checked even\n                    # if we know the result is true\n                    # because this will change the mouseover\n                    # of some buttons\n                    booResult = true;\n\n        return booResult\n\n\n    ##\n    # Add a new Button into the \n    #\n    # @param objButton CanvasBoxButton\n    # @return CanvasBoxElement me\n    ##\n    addButton:( objButton )->\n        if( @arrButtons.length > 0 )\n            objLast = @arrButtons[ @arrButtons.length - 1 ];\n            objButton.objPreviousButton = objLast;\n        @arrButtons.push( objButton );\n        return this;\n        \n    killMe:()->\n        @objBox.deleteElement( this );\n"]}