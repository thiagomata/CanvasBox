{"version":3,"sources":["CanvasBoxMenu.coffee"],"names":[],"mappings":"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","file":"CanvasBoxMenu.js","sourceRoot":"/source/","sourcesContent":["##\n# Class what draw the context menu of the canvas box\n#\n# @author Thiago Henrique Ramos da Mata <thiago.henrique.mata@gmail.com>\n##\nclass CanvasBoxMenu\n\n    ##\n    # Class Name\n    # @type string\n    ##\n    strClassName: \"CanvasBoxMenu\"\n    \n    ##\n    # Menu Border color\n    # @type string\n    ##\n    menuBorderColor: \"rgb( 100 , 100 , 200 )\"\n\n    ##\n    # Menu Border width\n    # @type integer\n    ##\n    menuBorderWidth: 1,\n\n    ##\n    # Menu Fill Color\n    # @type string\n    ##\n    menuFillColor: \"rgba( 230, 230, 240 , 0.7 )\",\n\n    ##\n    # Menu Item Border color\n    # @type string\n    ##\n    menuItemBorderColor: \"rgb( 100 , 100 , 200 )\",\n\n    ##\n    # Menu Item Border width\n    # @type integer\n    ##\n    menuItemBorderWidth: 1,\n\n    ##\n    # Menu Item Fill Color\n    # @type string\n    ##\n    menuItemFillColor: \"rgba( 230, 230, 240 , 0.7 )\",\n\n    ##\n    # Menu Item Text Color\n    # @type string\n    ##\n    menuItemTextColor: \"blue\",\n\n    ##\n    # Menu Selected Item Text Color\n    # @type string\n    ##\n    menuSelectedItemFillColor: \"rgba( 230, 230, 140 , 0.7 )\",\n\n    ##\n    # Menu X Position\n    # @type integer\n    ##\n    intMenuX: 0,\n\n    ##\n    # Menu Y Position\n    # @type integer\n    ##\n    intMenuY: 0,\n\n    ##\n    # Menu Item Border Width\n    # @type integer\n    ##\n    intMenuItemXBorder: 3,\n\n    ##\n    # Menu Item Height\n    # @type integer\n    ##\n    intMenuItemHeight: 20,\n\n    ##\n    # Menu Width\n    # @type integer\n    ##\n    intMenuWidth: 110,\n\n    ##\n    # Menu Itens Collection\n    # @type CanvasBoxMenuItem[]\n    ##\n    arrMenuItens: Array(),\n\n    ##\n    # Canvas Box Current Item\n    # @type String\n    ##\n    strCurrentMenuItem: null,\n\n    ##\n    # Mouse X position\n    #\n    # @type Integer\n    ##\n    mouseX: 0,\n\n    ##\n    # Mouse Y position\n    #\n    # @type Integer\n    ##\n    mouseY: 0,\n\n    ##\n    # Canvas Box owner\n    #\n    # @type CanvasBox\n    ##\n    objBox: null,\n\n    ##\n    # Canvas Box Element owner\n    #\n    # @type CanvasBoxElement\n    ##\n    objParent: null,\n\n    ##\n    # Canvas Box menu child\n    #\n    # @type CanvasBoxMenu\n    ##\n    objOpenChildMenu: null,\n    \n    draw:->\n        @strCurrentMenuItem = null;\n\n        arrMenuKeys = php.array_keys( @arrMenuItens );\n        @intMenuHeight = @intMenuItemHeight * ( arrMenuKeys.length - 1 );\n\n        @objBox.setStrokeStyle( @menuBorderColor );\n        @objBox.setLineWidth( @menuBorderWidth );\n        @objBox.strokeRect(\n            @intMenuX , @intMenuY, @intMenuWidth , @intMenuHeight\n        );\n\n        @objBox.setFillStyle( @menuFillColor );\n        @objBox.fillRect(\n            @intMenuX , @intMenuY, @intMenuWidth , @intMenuHeight\n        );\n\n        for strMenuKey , i in arrMenuKeys\n            intMenuItemX = @intMenuX;\n            intMenuItemY = @intMenuY + ( i ) * @intMenuItemHeight;\n\n            @objBox.setStrokeStyle( @menuItemBorderColor );\n            @objBox.setLineWidth( @menuItemBorderWidth );\n            @objBox.strokeRect(\n                intMenuItemX , \n                intMenuItemY , \n                @intMenuWidth , \n                @intMenuItemHeight \n            );\n\n            if      ( @mouseX > intMenuItemX ) &&\n                    ( @mouseX < ( intMenuItemX + @intMenuWidth ) ) &&\n                    ( @mouseY > intMenuItemY ) &&\n                    ( @mouseY < ( intMenuItemY + @intMenuItemHeight ) )\n                @objBox.setFillStyle( @menuSelectedItemFillColor );\n                @strCurrentMenuItem = strMenuKey;\n            else\n                @objBox.setFillStyle( @menuItemFillColor );\n\n            @objBox.fillRect(\n                intMenuItemX , intMenuItemY, @intMenuWidth , @intMenuItemHeight\n            );\n\n            @objBox.setFillStyle(\n                @arrMenuItens[ strMenuKey ].backgroundColor ? @menuItemTextColor \n            );\n            @objBox.setLineWidth( 0.9 );\n            @objBox.setFont( \"10px Times New Roman\" );\n            @objBox.setTextAlign( \"left\" );\n            @objBox.fillText(\n                @arrMenuItens[ strMenuKey ].name ,\n                @intMenuItemXBorder +  intMenuItemX ,\n                Math.round( intMenuItemY +   @intMenuItemHeight / 2 )\n            );\n\n        if( @objOpenChildMenu? )\n            @objOpenChildMenu.mouseX = @mouseX;\n            @objOpenChildMenu.mouseY = @mouseY;\n            @objOpenChildMenu.draw();\n\n    onClick:( event )->\n        booReturn = false;\n        if( @strCurrentMenuItem? )\n            funcEvent = @arrMenuItens[ @strCurrentMenuItem ].event;\n            if( ! Object.isUndefined( funcEvent ) && Object.isFunction( funcEvent ) )\n                @arrMenuItens[ @strCurrentMenuItem ].key = @strCurrentMenuItem;\n                booReturn = funcEvent( @objParent  , @arrMenuItens[ @strCurrentMenuItem ] , this );\n\n        if( not booReturn && @objOpenChildMenu? )\n            @objOpenChildMenu.mouseX = @mouseX;\n            @objOpenChildMenu.mouseY = @mouseY;\n            booReturn = @objOpenChildMenu.onClick( event );\n\n        if( not booReturn )\n            @strCurrentMenuItem = null;\n            @objOpenChildMenu = null;\n        \n        return booReturn;\n\n    onDraw:( event = null )->\n        @draw();\n        return true;\n\t\n    createChildMenu:( objMenuItem , arrMenuItens )->\n        objChildMenu = new autoload.newCanvasBoxMenu();\n        objChildMenu.objBox = @objBox;\n        objChildMenu.intMenuWidth = @intMenuWidth;\n        objChildMenu.intMenuX = @intMenuX + @intMenuWidth + 1;\n        objChildMenu.intMenuY = @intMenuY + @intMenuItemHeight * objMenuItem.key;\n        objChildMenu.intMenuItemXBorder = @intMenuItemXBorder;\n        objChildMenu.arrMenuItens = arrMenuItens;\n        objChildMenu.intMenuItemHeight = @intMenuItemHeight;\n        objChildMenu.objParent = @objParent;\n        @objOpenChildMenu = objChildMenu;\n        return true;\n"]}