
var CanvasBoxConnector;CanvasBoxConnector=function(){CanvasBoxConnector.prototype.objBox=null;CanvasBoxConnector.prototype.objElementFrom=null;CanvasBoxConnector.prototype.objElementTo=null;CanvasBoxConnector.prototype.x=0;CanvasBoxConnector.prototype.y=0;CanvasBoxConnector.prototype.z=0;CanvasBoxConnector.prototype.dx=3;CanvasBoxConnector.prototype.dy=3;CanvasBoxConnector.prototype.objBehavior=null;CanvasBoxConnector.prototype.objContext=null;CanvasBoxConnector.prototype.strClassName='CanvasBoxConnector';CanvasBoxConnector.prototype.isConnector=true;CanvasBoxConnector.prototype.booShowMenu=false;CanvasBoxConnector.prototype.objMenu=null;CanvasBoxConnector.prototype.fixed=false;CanvasBoxConnector.prototype.dragdrop=false;CanvasBoxConnector.prototype.toSerialize=function(){var objResult;objResult={x:this.x,y:this.y,dx:this.dx,dy:this.dy};objResult.objElementFrom=this.objBox.arrElements.indexOf(this.objElementFrom);objResult.objElementTo=this.objBox.arrElements.indexOf(this.objElementTo);objResult.strClassName=this.strClassName;return objResult;};CanvasBoxConnector.prototype.loadMenu=function(){this.objMenu=New.CanvasBoxMenu();this.objMenu.objParent=this;return this.objMenu.arrMenuItens={0:{name:'clone connector',event:function(objParent){return objParent.copy();}}};};CanvasBoxConnector.prototype.initialize=function(objElementFrom,objElementTo){this.objElementFrom=objElementFrom;this.objElementTo=objElementTo;return this.objBehavior=New.CanvasBoxConnectorBehavior(this);};CanvasBoxConnector.prototype.refresh=function(){};CanvasBoxConnector.prototype.draw=function(){};CanvasBoxConnector.prototype.isInside=function(){return false;};function CanvasBoxConnector(objElementFrom,objElementTo){this.objElementFrom=objElementFrom;this.objElementTo=objElementTo;if(this.objElementFrom===null){throw new CanvasBoxException('Canvas Box Line has no Element From on constructor');}
if(this.objElementTo===null){throw new CanvasBoxException('Canvas Box Line has no Element To on constructor');}
this.x=(this.objElementFrom.x+this.objElementTo.x)/2;this.y=(this.objElementFrom.y+this.objElementTo.y)/2;this.objBehavior=New.CanvasBoxConnectorBehavior(this);}
CanvasBoxConnector.prototype.onMouseOver=function(event){return this.objBehavior.onMouseOver(event);};CanvasBoxConnector.prototype.onMouseOut=function(event){return this.objBehavior.onMouseOut(event);};CanvasBoxConnector.prototype.onMouseDown=function(event){return this.objBehavior.onMouseDown(event);};CanvasBoxConnector.prototype.onClick=function(event){return this.objBehavior.onClick(event);};CanvasBoxConnector.prototype.onDblClick=function(event){return this.objBehavior.onDblClick(event);};CanvasBoxConnector.prototype.onDrag=function(event){return this.objBehavior.onDrag(event);};CanvasBoxConnector.prototype.onDrop=function(event){return this.objBehavior.onDrop(event);};CanvasBoxConnector.prototype.onTimer=function(event){return this.objBehavior.onTimer(event);};CanvasBoxConnector.prototype.onContextMenu=function(event){this.objBox.booShowMenu=!this.objBox.booShowMenu;if(this.objBox.booShowMenu){this.loadMenu();this.objMenu.intMenuX=this.objBox.mouseX;this.objMenu.intMenuY=this.objBox.mouseY;this.objMenu.objContext=this.objContext;this.objMenu.strActualMenuItem=null;this.objBox.objMenuSelected=this.objMenu;}
return false;};CanvasBoxConnector.prototype.getForce=function(objElement){return this.objBehavior.getForce(objElement);};CanvasBoxConnector.prototype.clone=function(objConnector){return this.cloneLine(objConnector);};CanvasBoxConnector.prototype.cloneLine=function(){var objLine;this.intCloneCount++;if(this.intCloneCount>0&&this.intCloneCount%2===0){objLine=New.CanvasBoxLine(this.objElementFrom,this);this.cloneConnector(objLine,true);}else{objLine=New.CanvasBoxLine(this,this.objElementTo);this.cloneConnector(objLine);}
return objLine;};CanvasBoxConnector.prototype.cloneConnector=function(objConnector,booReverse){console.log('clone connector');if(!objConnector){objConnector=New.CanvasBoxConnector(this,this.objElementTo);}else{objConnector.initialize(this,this.objElementTo);}
objConnector.objBehavior=New[this.objBehavior.strClassName](objConnector);objConnector.x=this.x;objConnector.y=this.y;objConnector.side=this.defaultSide?this.defaultSide:this.side;objConnector.color=this.defaultColor?this.defaultColor:this.color;objConnector.borderColor=this.defaultBorderColor?this.defaultBorderColor:this.borderColor;objConnector.borderWidth=this.defaultBorderWidth?this.defaultBorderWidth:this.borderWidth;this.objBox.addElement(objConnector);if(!booReverse){objConnector.objElementFrom=this;this.objElementTo=objConnector;if(this.objElementFrom){this.objElementFrom.objElementTo=this;}
if(this.objElementTo){this.objElementTo.objElementFrom=this;}
if(objConnector.objElementFrom){objConnector.objElementFrom.objElementTo=objConnector;}
if(objConnector.objElementTo){objConnector.objElementTo.objElementFrom=objConnector;}}else{objConnector.objElementFrom=this.objElementFrom;objConnector.objElementTo=this;this.objElementFrom=objConnector;if(this.objElementTo){this.objElementTo.objElementFrom=this;}
if(this.objElementFrom){this.objElementFrom.objElementTo=this;}
if(objConnector.objElementTo){objConnector.objElementTo.objElementFrom=objConnector;}
if(objConnector.objElementFrom){objConnector.objElementFrom.objElementTo=objConnector;}}
return objConnector;};CanvasBoxConnector.prototype.clone=function(objConnector){return this.cloneConnector(objConnector);};CanvasBoxConnector.prototype.onDelete=function(){console.log('connector on delete');if(this.objElementFrom.isConnector){this.objElementFrom.objElementTo=this.objElementTo;}
if(this.objElementTo.isConnector){return this.objElementTo.objElementFrom=this.objElementFrom;}};CanvasBoxConnector.prototype.deleteCascade=function(){this.deleteCascadeFrom();this.deleteCascadeTo();return this.objBox.deleteElement(this,false);};CanvasBoxConnector.prototype.deleteCascadeTo=function(){console.log('delete cascade');if(is_object(this.objElementTo)&&this.objElementTo.isConnector){if(this.objElementTo.getId()!==-1){this.objElementTo.deleteCascadeTo();}
return this.objBox.deleteElement(this.objElementTo,false);}};CanvasBoxConnector.prototype.deleteCascadeFrom=function(){if(is_object(this.objElementFrom)&&this.objElementFrom.isConnector){if(this.objElementFrom.getId()!==-1){this.objElementFrom.deleteCascadeFrom();}
return this.objBox.deleteElement(this.objElementFrom,false);}};CanvasBoxConnector.prototype.copy=function(){var objConnector;objConnector=new window[this.strClassName]();return this.clone(objConnector);};CanvasBoxConnector.prototype.getId=function(){return this.objBox.arrElements.indexOf(this);};CanvasBoxConnector.prototype.load=function(){};return CanvasBoxConnector;}();