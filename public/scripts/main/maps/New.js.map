{"version":3,"sources":["New.coffee"],"names":[],"mappings":"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","file":"New.js","sourceRoot":"/source/","sourcesContent":["##\n# Allow to load some necessary class without instance it\n#\n# @author Thiago Henrique Ramos da Mata <thiago.henrique.mata@gmail.com>\n##\nclass Load\n\n##\n# Allow to load some necessary class and instance it\n#\n# @author Thiago Henrique Ramos da Mata <thiago.henrique.mata@gmail.com>\n##\nclass New\n\narrScripts = document.head.getElementsByTagName( \"script\" );\n\nfor key , objScript of arrScripts\n\tif( objScript.src.indexOf( \"New.js\" ) > 0 )\n\t\twindow.MAIN_PATH = objScript.src.replace( \"New.js\" , \"\" );\n\t\tbreak;\n\nNew::arrMap =\n\tCanvasBox:              \"#{window.MAIN_PATH}CanvasBox\"\n\tCanvasBoxBehavior:      \"#{window.MAIN_PATH}CanvasBoxBehavior\" \n\tCanvasBoxButton:        \"#{window.MAIN_PATH}CanvasBoxButton\"\n\tCanvasBoxConnector:     \"#{window.MAIN_PATH}CanvasBoxConnector\"\n\tCanvasBoxElement:       \"#{window.MAIN_PATH}CanvasBoxElement\"\n\tCanvasBoxException:     \"#{window.MAIN_PATH}CanvasBoxException\" \n\tCanvasBoxLine:          \"#{window.MAIN_PATH}CanvasBoxLine\" \n\tCanvasBoxMenu:          \"#{window.MAIN_PATH}CanvasBoxMenu\" \n\tCanvasBoxPointer:       \"#{window.MAIN_PATH}CanvasBoxPointer\" \n\tCanvasBoxPolygon:       \"#{window.MAIN_PATH}CanvasBoxPolygon\" \n\tCanvasBoxExportButton:  \"#{window.MAIN_PATH}button/CanvasBoxExportButton\" \n\tCanvasBoxFixedButton:   \"#{window.MAIN_PATH}button/CanvasBoxFixedButton\" \n\tCanvasBoxSaveButton:    \"#{window.MAIN_PATH}button/CanvasBoxSaveButton\" \n\tCanvasBoxZoomInButton:  \"#{window.MAIN_PATH}button/CanvasBoxZoomIntButton\" \n\tCanvasBoxZoomOutButton: \"#{window.MAIN_PATH}button/CanvasBoxZoomOutButton\" \n\tCanvasBoxConnectorBehavior: \"#{window.MAIN_PATH}CanvasBoxConnectorBehavior\"\n\tCanvasBoxGravityBehavior:   \"#{window.MAIN_PATH}CanvasBoxGravityBehavior\" \n\tCanvasBoxMagneticBehavior:  \"#{window.MAIN_PATH}CanvasBoxMagneticBehavior\" \n\tCanvasBoxRender:            \"#{window.MAIN_PATH}CanvasBoxRender\" \n\tCanvasBoxState:             \"#{window.MAIN_PATH}../diagram/stateMachine/CanvasBoxState\"\n\tCanvasBoxStateDiagram:      \"#{window.MAIN_PATH}../diagram/stateMachine/CanvasBoxStateDiagram\"\n\tCanvasBoxStateLink:         \"#{window.MAIN_PATH}../diagram/stateMachine/CanvasBoxStateLink\"\n\tCanvasBoxStateRender:       \"#{window.MAIN_PATH}../diagram/stateMachine/CanvasBoxStateRender\"\n \nNew::arrClasses = Array();\n\nNew::loadClass = ( strClass )->\n\tLoad[strClass] =  ->\n\t\treturn false;\n\n\tNew[strClass] = new Function ( \"return New.prototype.Ready({ name: '#{strClass}', data: arguments });\" )\n\n\tconsole.log( \"Load Class #{strClass}\")\n\ttry\n\t\tif( php.in_array( strClass, New::arrClasses ) )\n\t\t\treturn false;\n\t\tif( ! New::arrMap[ strClass ]? )\n\t\t\tthrow new Error( \"Unabled to map the class #{strClass}\" );\n\t\tconsole.log( \"loading... \" + strClass );\n\t\tif( php.file_exists( New::arrMap[ strClass] + \".js\" ) )\n\t\t\tconsole.log( \"load \" + New::arrMap[ strClass] + \".js\" );\n\t\t\tphp.require_once( New::arrMap[ strClass] + \".js\" );\n\t\telse\n\t\t\tstrContent = php.file_get_contents( New::arrMap[ strClass] + \".coffee\");\n\t\t\tconsole.log( \"run \" + strClass+ \".coffee\" )\n\t\t\ttry\n\t\t\t\tCoffeeScript.run( strContent );\n\t\t\tcatch objError\n\t\t\t\tconsole.log( \"unable to run \" + strClass );\n\t\t\t\tconsole.log( objError.message );\n\t\t\t\tthrow objError\n\t\tNew::arrClasses.push( strClass );\n\t\treturn true;\n\tcatch objError\n\t\tconsole.log( \"Error on load #{strClass}\" );\n\t\tconsole.log( objError );\n\t\tthrow objError;\n\nNew::construct=(klass,args)->\n  ObjectPointer = ->\n    klass.apply(this, arguments[0]);\n  ObjectPointer.prototype = klass.prototype; \n  return new ObjectPointer(args);\n\n###\nNew::construct=(klass,args)->\n\ttry\n\t\tObjectPointer = ->\n\t\t\tklass.apply(this, arguments[0]);\n\t\tObjectPointer.prototype = klass.prototype; \n\t\treturn new ObjectPointer(args);\n\tcatch objError\n\t\tobjException = new Error( \"Unable to load the class #{klass}.\" )\n\t\tobjException.parentError = objError\n\t\tthrow objException\n###\n\nNew::addMap = ( strClass , link = null )->\n\tconsole.log( \"New.addMap \", strClass, link );\n\tNew::arrMap[ strClass ] = link if link?;\n\tNew[strClass] = new Function ( \"return New.prototype.Instance({ name: '#{strClass}', data: arguments });\" )\n\tLoad[strClass] = new Function ( \"return Load.prototype.Instance({ name: '#{strClass}', data: arguments });\" )\n\nNew::importMap = ( strPathJsonFile )->\n\tif( !php.file_exists( strPathJsonFile ) )\n\t\tthrow new Error( \"Unable to find the file #{strPathJsonFile}.\" )\n\tstrJson = php.file_get_contents( strPathJsonFile );\n\ttry\n\t\tobjJson = JSON.parse( strJson );\n\tcatch objError\n\t\tobjException = new Error( \"Invalid Json receveid in file #{strPathJsonFile}\" )\n\t\tobjException.parentError = objError\n\t\tthrow objException\n\tfor strClass, strLink of objJson\n\t\tNew::addMap( strClass, strLink )\n\nNew::start=->         \n\tfor element , path of New::arrMap\n\t\tNew::addMap(element)\n\nNew::Instance= ( arrDataLoad ) ->\n\tNew::loadClass( arrDataLoad.name );\n\treturn New::construct( window[ arrDataLoad.name ] , arrDataLoad.data );\n\nNew::Ready= ( arrDataLoad ) ->\n\treturn New::construct( window[ arrDataLoad.name ] , arrDataLoad.data );\n\nLoad::Instance= ( arrDataLoad ) ->\n\tNew::loadClass( arrDataLoad.name );\n\treturn window[arrDataLoad.name];\n\nNew::start();\n"]}