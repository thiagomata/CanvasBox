var CanvasCollisionExample,__hasProp={}.hasOwnProperty,__extends=function(t,o){function e(){this.constructor=t}for(var n in o)__hasProp.call(o,n)&&(t[n]=o[n]);return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t};Load.CanvasBox(),CanvasCollisionExample=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return __extends(o,t),o.prototype.init=function(){var t;return console.log("canvas box collision example"),this.setBackgroundColor("white"),t=New.CollisionSquare(),t.x=this.width/2,t.y=this.height/2,this.addElement(t),t=New.CollisionSquare(),t.x=this.width-t.side,t.y=this.height-t.side,this.addElement(t),this.play()},o}(CanvasBox);
var CollisionSquare,__hasProp={}.hasOwnProperty,__extends=function(t,o){function i(){this.constructor=t}for(var s in o)__hasProp.call(o,s)&&(t[s]=o[s]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t};Load.CanvasBoxElement(),CollisionSquare=function(t){function o(){return this.color=this.colorRegular,this.borderColor=this.borderColorRegular,o.__super__.constructor.call(this)}return __extends(o,t),o.prototype.side=100,o.prototype.colorRegular="rgb(150,150,250)",o.prototype.colorOver="yellow",o.prototype.colorDrag="rgb(100,100,250)",o.prototype.color=null,o.prototype.borderColorRegular="rgb(100,100,100)",o.prototype.borderColor=null,o.prototype.borderColorOver="rgb( 250 , 250, 250 )",o.prototype.borderWidth=2,o.prototype.strClassName="Square",o.prototype.intLastX=0,o.prototype.intLastY=0,o.prototype.toSerialize=function(){var t;return t=o.__super__.toSerialize.apply(this,arguments),t.color=this.color,t.borderColor=this.borderColor,t.side=this.side,t},o.prototype.draw=function(){return this.refresh(),this.objBox.setFillStyle(this.color),this.objBox.fillRect(Math.round(this.x-this.side/2),Math.round(this.y-this.side/2),Math.round(this.side),Math.round(this.side)),this.objBox.setStrokeStyle(this.borderColor),this.objBox.lineWidth=""+this.borderWidth+"px",this.objBox.strokeRect(Math.round(this.x-this.side/2),Math.round(this.y-this.side/2),Math.round(this.side),Math.round(this.side)),this.objBox.setStrokeStyle("black"),this.objBox.strokeText("Drag and Drop",this.x-30,this.y),this},o.prototype.onMouseOver=function(t){return console.log("square over"),this.borderColor=this.borderColorOver,this.color=this.colorOver,o.__super__.onMouseOver.call(this,t)},o.prototype.onMouseOut=function(t){return this.borderColor=this.borderColorRegular,this.color=this.colorRegular,o.__super__.onMouseOut.call(this,t)},o.prototype.checkValidPosition=function(){return this.inCollision()?(this.x=this.lastValidX,this.y=this.lastValidY):(this.lastValidX=this.x,this.lastValidY=this.y)},o.prototype.onDrag=function(t){return this.color=this.colorDrag,o.__super__.onDrag.call(this,t),this.checkValidPosition(),this},o.prototype.goLeft=function(t){return o.__super__.goLeft.call(this,t),this.checkValidPosition(),this},o.prototype.goRight=function(t){return o.__super__.goRight.call(this,t),this.checkValidPosition(),this},o.prototype.goUp=function(t){return o.__super__.goUp.call(this,t),this.checkValidPosition(),this},o.prototype.goDown=function(t){return o.__super__.goDown.call(this,t),this.checkValidPosition(),this},o.prototype.onDrop=function(t){return this.color=this.colorRegular,o.__super__.onDrop.call(this,t)},o.prototype.onClick=function(t){return this.side<200&&(this.side+=5),this.onMouseOver(t),o.__super__.onClick.call(this,t)},o.prototype.onDblClick=function(t){return this.side=100,o.__super__.onDblClick.call(this,t)},o.prototype.isInsideElement=function(t,o){return Math.round(t)>=Math.round(this.x-this.side/2)&&Math.round(t)<=Math.round(this.x+this.side/2)&&Math.round(o)>=Math.round(this.y-this.side/2)&&Math.round(o)<=Math.round(this.y+this.side/2)},o.prototype.inCollision=function(){var t,o,i,s;for(s=this.objBox.arrElements,o=0,i=s.length;i>o;o++)if(t=s[o],t.getId()!==this.getId()&&(t.isInsideElement(this.x-this.side/2,this.y-this.side/2)||t.isInsideElement(this.x+this.side/2,this.y-this.side/2)||t.isInsideElement(this.x-this.side/2,this.y+this.side/2)||t.isInsideElement(this.x+this.side/2,this.y+this.side/2)||t.isInsideElement(this.x-this.side/2,this.y)||t.isInsideElement(this.x+this.side/2,this.y)||t.isInsideElement(this.x,this.y+this.side/2)||t.isInsideElement(this.x,this.y-this.side/2)))return!0;return!1},o}(CanvasBoxElement);