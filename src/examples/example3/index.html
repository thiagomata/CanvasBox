<html>
<!--
A simple example of canvas box with a square
-->
    <head>
        <title>A simple example of canvas box with a square</title>
        <script src="../../coffee/jquery-1.4.2.js"></script> 
        <script src="../../coffee/coffee-script.js"></script> 
        <script src="../../php/php.basic.js"></script> 
        <script src="../../php/php.caller.js"></script> 
        <script src="../../main/Browser.js"></script> 
        <script src="../../main/New.js"></script> 
    </head>
    <body>
        <div>
            <h1> This is a simple demo of how to use canvas box </h1>
            <p>
                  This example focus into how to create, change and destroy many
                  objects without big coding work. It shows too, how to manipulate
                  the canvas box to override native events. 
            </p>
            <p>
                <canvas id="myCanvas"></canvas>
                <script>
                $(document).ready( function(){
                    /* 
                     * add the square in the load map 
                     */
                    New.prototype.addMap( "Bubble", 
                        "Bubble" );
                    
                    /*
                     * create the canvas box 
                     */
                    var objBox = New.CanvasBox( "myCanvas" , 510 );
                    objBox.setBackgroundColor("#DDDDFF");
                    
                    objBox.getPosition();
                    objBox.onBoxClick = function onBoxClick( event )
                    {
                        var objBubble = New.Bubble();
                        objBubble.x = this.mouseX;
                        objBubble.y = this.mouseY;
                        this.addElement( objBubble );                       
                        return CanvasBox.prototype.onBoxClick.bind( this )( event );
                    };
                    
                    window.loopTimer = function loopTimer()
                    {
                        if( objBox.arrElements.length > 15 )
                        {
                            return false;
                        }
                        if (Math.floor( Math.random() * 5 ) == 1 )
                        {
                            var objBubble = New.Bubble();
                            objBubble.x = Math.floor( Math.random() * objBox.width );
                            objBubble.y = objBox.height - Math.floor( Math.random() * objBox.height / 8 );
                            objBox.addElement( objBubble );                     
                        }
                    }
                    
                    /* 
                     * play the box
                     */
                    objBox.play();
                    
                    setInterval( 'window.loopTimer()' , 100 );
                })                    
                </script>
            </p>
        </div>
        <div id="log"></div>
    </body>
</html>